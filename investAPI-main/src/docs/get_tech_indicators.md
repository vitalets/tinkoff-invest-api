# Работа с индикаторами технического анализа

[Статья про индикаторы технического анализа рынка](/investAPI/tech_indicators/)

Через метод [GetTechAnalysis](/investAPI/marketdata/#gettechanalysis) можно получить некоторые из них:

- **SMA** — простая скользящая средняя;

- **EMA** — экспоненциальная (скользящая) средняя;

- **BB** — линии Боллинджера;

- **MACD** — индикатор «Схождение-расхождение скользящих средних»;

- **RSI** — индекс относительной силы.

## [SMA и EMA](https://www.tbank.ru/invest/help/educate/trading/about/ma-ema/)

Параметры: 

<ul>
<li><p><strong>interval</strong> — интервал времени, которому равна каждая свеча на свечном графике или каждая точка на линейном графике.</p>
</li>
<li><p><strong>length</strong> — период, за который рассчитываются средние значения.</p>
<p> Например, если период скользящей средней — 20 единиц, при интервале 1 день она будет считать средние значения за 20 торговых дней, а при интервале 1 час — за 20 торговых часов.</p>
</li>
<li><p><strong>signal</strong>  — рассчитанные значения в выходных параметрах метода.</p>
</li>
</ul>

## Линии Боллинджера (BB)

Инструмент технического анализа финансовых рынков, который отражает текущие отклонения цены акции, товара или валюты. Индикатор рассчитывается на основе стандартного отклонения от простой скользящей средней.

Кроме `interval` и `length`, у линий Боллинджера есть ещё один параметр настройки индикатора — **deviation_multiplier**. Это количество стандартных отклонений, на которые отступают верхняя и нижняя границы.

В результате для каждого интервала определяется три значения:

- **lower_band** — нижняя граница;

- **middle_band** — скользящее среднее значение;

- **upper_band** — верхняя граница.


## [MACD](https://www.tbank.ru/invest/help/educate/trading/about/macd/)

Кроме `interval`, для MACD характерны следующие настроечные параметры:

- **fast_lenght** — быстрая линия;

- **slow_lenght** — медленная линия;

- **signal_smoothing** — сглаживание.

На выходе определяется:

- **macd** — рассчитанный MACD;

- **signal** — значение сигнальной линии.


## [Индекс Относительной силы (RSI)](https://www.tbank.ru/invest/help/educate/trading/about/rsi/)

Так как RSI рассчитывается на основе EMA, ему характерны те же входные параметры — `interval` и `length`.

Результатом расчётов будет значение индекса `signal`.

## Общие параметры

Чтобы получить индикаторы, также нужно задать общие параметры:

- **from** — начало запрашиваемого периода по UTC, за который рассчитывается индикатор;

- **to** — окончание запрашиваемого периода по UTC;

- **type_of_price** — тип цены, используемый при расчёте индикатора.


## Обобщённая таблица параметров

### Входные параметры

| Indicator |    interval         |    length    | deviation_multiplier | fast_length  | slow_length   | signal_smoothing |   from    |    to     |    type_of_price        |
|:----------|:--------------------|:-------------|:---------------------|:-------------|:--------------|:-----------------|:----------|:----------|:------------------------|
|  **SMA**  | От минуты до месяца | От 1 до 1000 |                      |              |               |                  | Timestamp | Timestamp | `close`, `open`, `high`, `low`, `avg` |
|  **EMA**  | От минуты до месяца | От 1 до 1000 |                      |              |               |                  | Timestamp | Timestamp | `close`, `open`, `high`, `low`, `avg` |
|  **BB**   | От минуты до месяца | От 1 до 1000 | От 0 до 50           |              |               |                  | Timestamp | Timestamp | `close`, `open`, `high`, `low`, `avg` |
|  **MACD** | От минуты до месяца |              |                      | От 1 до 1000 |  От 1 до 1000 |    От 0 до 50    | Timestamp | Timestamp | `close`, `open`, `high`, `low`, `avg` |
|  **RSI**  | От минуты до месяца | От 1 до 1000 |                      |              |               |                  | Timestamp | Timestamp | `close`, `open`, `high`, `low`, `avg` |


### Выходные параметры

| Indicator |    dt     |    signal            |    lower_band  |      middle_band   |   upper_band    | macd |
|:----------|:----------|:---------------------|:---------------|:-------------------|:----------------|:-----|
|  **SMA**  | Timestamp | Скользящее среднее   |                |                    |                 |      |
|  **EMA**  | Timestamp | Скользящее среднее   |                |                    |                 |      |
|  **BB**   | Timestamp |                      | Нижняя граница | Скользящее среднее | Верхняя граница |      |
|  **MACD** | Timestamp | Сигнальное значение  |                |                    |                 | MACD |
|  **RSI**  | Timestamp |     Индекс силы      |                |                    |                 |      | 